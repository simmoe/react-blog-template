(this["webpackJsonpreact-blog-template"]=this["webpackJsonpreact-blog-template"]||[]).push([[0],{29:function(e,t,a){e.exports=a(71)},34:function(e,t,a){},35:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),c=a(20),r=a.n(c),l=(a(34),a(7)),i=(a(35),a(13)),m=a.n(i);m.a.initializeApp({apiKey:"AIzaSyC5ize_t5L01W_Q3TZmmxTfye1Z9rOSp0E",authDomain:"web-firestore-authentication.firebaseapp.com",databaseURL:"https://web-firestore-authentication.firebaseio.com",projectId:"web-firestore-authentication",storageBucket:"web-firestore-authentication.appspot.com",messagingSenderId:"954309262588",appId:"1:954309262588:web:c7d23d1466067040a0ab79",measurementId:"G-TY9H31DPG5"});var s=m.a,u=a(6),d=(a(53),function(e){return o.a.createElement("header",null,o.a.createElement(u.a,{to:"/react-blog-template/"},"projects"),o.a.createElement(u.a,{to:"/react-blog-template/contact"},"contact"),o.a.createElement(u.a,{to:"/react-blog-template/login"},e.signedIn?"profile":"login"))}),g=a(24),p=a(25),f=(a(54),a(23)),E=a.n(f),h=function(e){return o.a.createElement("div",{className:"project"},e.project.defaultImage&&o.a.createElement("img",{src:e.project.defaultImage,alt:"hei"}),o.a.createElement("h1",null,e.project.title),o.a.createElement("div",null,e.project.year),o.a.createElement("div",null,E()(e.project.description)),e.signedIn&&o.a.createElement("div",{className:"admin"},o.a.createElement(u.a,{to:"/react-blog-template/edit/"+e.id,className:"edit-icons"},o.a.createElement(g.a,{className:"edit-icon"})),o.a.createElement(p.a,{onClick:function(){window.confirm("sure?")&&s.firestore().collection("projects").doc(e.id).delete()},className:"edit-icon"})))},b=a(27),j=a(26),v=a.n(j),I=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],r=a[1];Object(n.useEffect)((function(){s.firestore().collection("projects").orderBy("year","desc").onSnapshot((function(e){return r(e.docs)}))}),[]);return o.a.createElement("main",{className:"home"},e.signedIn&&o.a.createElement("div",{className:"admin-actions",onClick:function(){s.firestore().collection("projects").add({title:"new project",year:2020,description:"",timestamp:s.firestore.FieldValue.serverTimestamp()}).then((function(e){console.log("Added document with ID: ",e.id)})).catch((function(e){return console.log(e)}))}},o.a.createElement(b.a,{className:"edit-icon"})),c.length>0?o.a.createElement(v.a,{breakpointCols:{default:3,1400:2,1e3:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column"},c.map((function(t){return o.a.createElement(h,{key:t.id,id:t.id,project:t.data(),signedIn:e.signedIn})}))):o.a.createElement("p",null,"Getting projects, hold on..."))},w=function(e){return o.a.createElement("main",null,o.a.createElement("div",{className:"contact-info"},o.a.createElement("h1",null,"Contact me"),o.a.createElement("p",null,"Simon Moe"),o.a.createElement("p",null,"+45 6556 9898"),o.a.createElement("a",{href:"mailto:simmoe@gmail.com"},"simmoe@gmail.com")))},S=function(e){return o.a.createElement("main",{className:"login"},!e.signedIn&&o.a.createElement(o.a.Fragment,null,!localStorage.getItem("Logging in")&&o.a.createElement("button",{onClick:function(){var e=new s.auth.GoogleAuthProvider;e.addScope("profile"),e.addScope("email"),s.auth().signInWithPopup(e).catch((function(e){console.log(e)})),localStorage.setItem("Logging in",!0)}},"use google to sign in"),localStorage.getItem("Logging in")&&o.a.createElement("p",null,"Log in progress, hold on...")),e.signedIn&&o.a.createElement("div",null,o.a.createElement("h1",null,"You are logged in to firebase"),o.a.createElement("p",null,"Welcome ",s.auth().currentUser.displayName,". You are now signed-in."),o.a.createElement("button",{onClick:function(){s.auth().signOut()}},"Sign-out"),s.auth().currentUser.photoURL&&o.a.createElement("img",{src:s.auth().currentUser.photoURL,alt:"profile"})))},y=a(12),O=a(14),N=a(28),C=a.n(N),k=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),m=Object(l.a)(i,2),u=m[0],d=m[1];Object(n.useEffect)((function(){window.scrollTo(0,0),s.firestore().collection("projects").doc(e.id).onSnapshot((function(e){r(e.data())}))}),[e.id]);var g=function(e){e.persist(),r((function(t){return Object(O.a)({},t,Object(y.a)({},e.target.name,e.target.value))}))};return o.a.createElement("main",{className:"edit"},o.a.createElement("h1",null,"Edit project"),o.a.createElement("p",null,"Project id: ",e.id),c&&o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),d("updating, please hold..."),s.firestore().collection("projects").doc(e.id).update(c).then((function(){d("project updated")})).catch((function(e){d("Error saving project: "+e.message)}))}},o.a.createElement("input",{name:"title",onChange:g,value:c.title}),o.a.createElement("input",{name:"year",onChange:g,placeholder:"year",value:c.year}),o.a.createElement("textarea",{name:"description",placeholder:"description",onChange:g,value:c.description}),c.defaultImage&&o.a.createElement("img",{alt:"post img",src:c.defaultImage}),o.a.createElement("label",null,o.a.createElement("div",{className:"add"},c.defaultImage?"new image":"add image"),o.a.createElement(C.a,{hidden:!0,accept:"image/*",name:"picture",randomizeFilename:!0,storageRef:s.storage().ref("images"),onUploadStart:function(){d("uploading image, please hold")},onUploadError:function(e){d(e.message)},onUploadSuccess:function(e){s.storage().ref("images").child(e).getDownloadURL().then((function(e){return r((function(t){return Object(O.a)({},t,{defaultImage:e})}))})),d("image ready")}})),o.a.createElement("button",{type:"submit"},"save")),o.a.createElement("p",null,u)))},L=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){s.auth().onAuthStateChanged((function(e){e?(c(!0),localStorage.removeItem("Logging in")):(c(!1),console.log("not signed in"))}))})),o.a.createElement("div",null,o.a.createElement(d,{signedIn:a}),o.a.createElement(u.b,null,o.a.createElement(I,{path:"/react-blog-template/",signedIn:a}),o.a.createElement(w,{path:"/react-blog-template/contact",signedIn:a}),o.a.createElement(S,{path:"/react-blog-template/login",signedIn:a}),o.a.createElement(k,{path:"/react-blog-template/edit/:id"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.44ef0da1.chunk.js.map